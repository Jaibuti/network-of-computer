@[toc]

## 1、应用层概述

```
解决通过应用进程的交互来实现特定网络应用的问题；
```
## 2、C/S方式和P2P方式

### 2.1 C/S方式

```
client和server指通信中所设计的两个应用进程；
c/s描述进程之间服务和被服务的关系；
client是服务请求方，server是服务提供方；
server总是处于运行状态，并等待client的服务请求；server具有固定端口号，而运行server的主机也具有固定的IP地址；
基于C/S方式的应用服务是服务集中型，由于server需要供许多client使用，故常用计算机群集构建一个强大的虚拟服务器；
```

### 2.2 对等方式

```
在该方式中，没有固定的服务请求者和服务提供者；
	- 分布在网络边缘各端系统中的应用进程是对等的，被称为对等方；
	- 对等方相互之间直接通信，每个对等方既是服务的请求者，又是服务的提供者；
【主要应用】：
	- P2P文件共享；
	- 即时通信；
	- P2P流媒体；
	- 分布式存储；
基于P2P的应用是服务分散型的，分散在大量对等计算机中；
最突出特性之一是可扩展性。因为系统每增加一个对等方，不仅增加的是服务的请求者，同时也增加了服务的提供者，系统性能不会因规模的增大而降低；
具有成本上的优势，因为它不需要庞大的服务器设施和带宽；
```

### 2.3 动态主机配置协议DHCP
**DHCP作用**
```
【若主机要访问Web服务器】：
则需要配置IP地址、子网掩码、默认网关、DNS服务器信息；若有众多主机需要配置，则将会非常繁琐且易出错；
故在网络中添加一台DHCP服务器，并在内设置好信息，网络中各主机开始后自动启动DHCP程序，
向DHCP服务器请求网络配置信息，即可获取；
```
**工作过程**

```
- DHCP使用UDP提供的服务；
- DHCP服务器使用端口为67，客户使用68；

【交互过程】：
- 当启动主机的DHCP后，DHCP客户将广播发送DHCP发现报文，该报文的IP数据报的源IP地址为0.0.0.0（由于主机目前还为分配到IP地址），
	目的地址为255.255.255.255（由于主机不知道网络中有哪几个DHCP服务器及IP地址）；
- 当DHCP服务器接收到该报文（事务ID、DHCP客户端的MAC地址），根据其中封装的DHCP客户端的MAC地址来查找自己的数据库，
	看是否针对该MAC地址的配置信息，若有，则使用这些信息构造并发送DHCP提供报文；
- 采用默认配置信息来构建并发送DHCP提供报文，封装该报文的IP数据报的源IP地址为DHCP服务器的IP地址，
 	目的地址仍为广播地址（主机目前没有配置IP地址）
- 故当DHCP客户会接受该报文并做出相应处理（由于运行着68端口号的进程）； 
- DHCP客户会根据DHCP提供报文中的事务ID来判断该报文是否是自己所请求的报文；
	DHCP服务器从自己的IP地址池中挑选待租用给主机的IP地址时，使用ARP确保所选地址未被网络中其他主机占用；
- 客户会收到多个DHCP服务器的报文，一般只选第一个；
```
![在这里插入图片描述](https://img-blog.csdnimg.cn/e0f9e5592eb24c8993741d3f5e2122e0.png)
```
- 紧接着向所选择的DHCP服务器发送DHCP请求报文，源IP地址为0.0.0.0（由于刚挑选好DHCP服务器，需要征得该服务器的同意才能正确使用），
	目的IP仍为广播地址（不同向网络中的每一个DHCP服务器单播发送DHCP请求报文（内封装有事务ID，及客户端MAC地址，接受租约的IP地址，
	提供该IP地址的DHCP服务器IP地址 ））；
- 若DHCP服务器接收到该DHCP客户的报文，并发送确认报文（源IP为该服务器IP地址），目的地址仍为广播地址；
- 若客户收到即可使用该租用的IP地址（若该IP被占用则会向DHCP服务器发送谢绝报文）；
- 当租用期过了一般时，DHCP客户向DHCP服务器发送DHCP请求报文，请求更新租用期；
	封装该报文的IP数据报的源IP地址为租用地址，目的地址为DHCP服务器地址；
- 客户可随机终止租用IP地址；
```
![在这里插入图片描述](https://img-blog.csdnimg.cn/e2d4a615347245b2b092d33f8ec3a35b.png)
**中继代理**

```
通过给路由器配置DHCP服务器地址，称为中继代理；
当该路由器收到广播的DHCP发现报文后，会将其单播发送给DHCP服务器；

为此，在网络中减少了DHCP服务器的数量；
```
### 2.4 域名系统DNS

详细参考此处[【网络是怎样连接的】| 【01】浏览器如何生成消息？如何与服务器通信？](https://blog.csdn.net/weixin_45926547/article/details/124851637?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165347689916782248532658%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=165347689916782248532658&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-6-124851637-null-null.nonecase&utm_term=DNS&spm=1018.2226.3001.4450)

### 2.5 文件传送协议FTP
```
文件传送协议FTP是因特网上使用得最广泛的文件传送协议；
	- FTP提供交互式的访问，允许客户指明文件的类型与格式，并允许文件具有存取权限（如访问文件的用户必须经过授权，并输入有效的口令)；
	- FTP屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件；
```

**应用**
```
FTP采用c/s方式，clent能够在ftp服务器上上传或下载；
```
**用途**
```
- 在计算机之间批量传输文件；
- 让网站设计者将构成网站内容的大量文件批量上传到他们的web服务器；
```
**基本工作原理**

![在这里插入图片描述](https://img-blog.csdnimg.cn/7e0a4de331ce488587165c721c62e288.png)


### 2.6 电子邮件
```
电子邮件与邮政系统的寄信相似：
	- 发件人将邮件发送到自己使用的邮件服务器；
	- 发件人的邮件服务器将收到的邮件按其目的地址转发到收件人邮件服务器中的收件人邮箱；
	- 收件人在方便的时候访问收件人邮件服务器中自己的邮箱，获取收到的电子邮件；
电子邮件使用方便、费用低廉，可传送文字、声音、图像；
电子邮件采用c/s方式；

【主要组件】：用户代理、邮件服务器、电子邮件所需的协议；
	- 用户代理是用户与电子邮件系统的接口，又称为电子邮件客户端软件；
	- 邮件服务器是电子邮件系统的基础设施；因特网上所有的ISP都有邮件服务器，其功能是发送和接收邮件，同时还要负责维护用户的邮箱；
	- 协议包括邮件发送协议STMP和邮件读取协议POP3、IMAP；
```
![在这里插入图片描述](https://img-blog.csdnimg.cn/8db0aaa5cc22480c9488784f6c5c9f1d.png)
**SMTP工作原理**

![在这里插入图片描述](https://img-blog.csdnimg.cn/769b83779a5a43a4ae6ead24baf2e9a9.png)
**信息格式**

```
电子邮件有信封和内容两部分，内容又有首部和主体两部分；
	- 首部：需要根据关键字信息填入，用户填好首部后，邮件系统将信封所需的信息提取出来并写在信封上，故用户不需要在信封上填写信息；
		From、To、Cc……；
	- 主体：核心信息；
STMP只能传输ASCII码文本数据，为此提出了多用途因特网邮件MIME；
	- 增加了5个新的邮件首部字段，提供有关邮件主体的信息；
	- 定义了许多邮件内容的格式，对多媒体电子邮件的表示方法进行了标准化；
	- 定义了传送编码，可对任何内容格式进行转换，而不会被邮件系统改变；
	- MIME也可用于HTTP；
```

![在这里插入图片描述](https://img-blog.csdnimg.cn/0761ac1137894a188eb070d0e863993c.png)

**邮件的读取**
```
【邮局协议POP】：非常简单、功能有限的邮件读取协议；
	用户只能以下载并删除方式或下载并保留方式从邮件服务器下载邮件到用户方计算机；
	不允许用户在邮件服务器上管理自己的邮件；
【因特网邮件访问协议IMAP】：功能比POP3强大的邮件读取协议；
	用户在自己的计算机上就可以操控邮件服务器中的邮箱，类似本地操控，因此IMAP是一个联机协议；
两者都采用基于TCP连接的c/s方式；POP3使用熟知端口110，IMAP4使用熟知端口143；
```

**基于万维网的电子邮件**

```
- 通过浏览器登录(提供用户名和口令）邮件服务器万维网网站就可以撰写、收发、阅读和管理电子邮件；
	该工作模式类似IMAP，不同的是用户计算机无需安装专门的用户代理程序，只需要使用通用的万维网浏览器即可；
- 邮件服务器网站通常都提供非常强大和方便的邮件管理功能，用户可以在邮件服务器网站上管理和处理自己的邮件，而不需要将邮件下载到本地进行管理；
```
![在这里插入图片描述](https://img-blog.csdnimg.cn/0389fb32a19b476db07cbfa9660a91e6.png)
### 2.7 万维网
```
万维网并非某种特殊的计算机网络，是大规模的、联机式的信息储藏所；
万维网利用网页之间的超链接将不同网站的网页链接成一张逻辑上的信息网；

【浏览器】：最重要的部分是渲染引擎，浏览器内核；
	- 不同的浏览器内核对页面的内容解析不同；
```
[参考：【网络是怎样连接的】| 【01】浏览器如何生成消息？如何与服务器通信？](https://blog.csdn.net/weixin_45926547/article/details/124851637?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165347689916782248532658%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=165347689916782248532658&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-6-124851637-null-null.nonecase&utm_term=DNS&spm=1018.2226.3001.4450)ss